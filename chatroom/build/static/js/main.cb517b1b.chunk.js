(this.webpackJsonpchatroom=this.webpackJsonpchatroom||[]).push([[0],{44:function(e,t,n){e.exports=n(90)},49:function(e,t,n){},78:function(e,t){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(13),r=n(2),c=n(3),i=n(5),u=n(4),l=n(6);n(49);var m=function(e){var t=e.chatlog.map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("div",{className:"msgholder"},s.a.createElement("div",{className:"namediv"},e.username),s.a.createElement("div",{className:"msgdiv"},e.msg),s.a.createElement("div",{className:"timediv"},e.time)))}));return s.a.createElement("div",{id:"chathistory",className:"chathistory"},s.a.createElement("ul",{id:"chatlist",className:"chatlist"},t))},d=n(42),h=n.n(d)()(window.location.hostname+":3001");function f(e){h.emit("new_msg",e)}function g(){var e={};if(window.location.search)for(var t=window.location.search.substr(1).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");e[a[0]]=a[1]}return e}var v=n(43);var p=function(e){var t=e.users.map((function(e,t){return s.a.createElement("li",{key:t},e.username)}));return s.a.createElement("div",{className:"userlistdiv"},"Users:",s.a.createElement("br",null),s.a.createElement("ul",{className:"userlist"},t))},E=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={username:n.props.state.username,roomid:n.props.state.roomid,msg:""},n.keyListener=function(e){if(13===e.keyCode&&!e.shiftKey){for(;n.state.msg.lastIndexOf("\n")===n.state.msg.length-1;)n.setState({msg:n.state.msg.substr(0,n.state.msg.length-1)});""!==n.state.msg&&f({username:n.state.username,roomid:n.state.roomid,msg:n.state.msg}),n.setState({msg:""})}},n.sendMsg=function(){n.state.msg&&f({username:n.state.username,roomid:n.state.roomid,msg:n.state.msg}),n.setState({msg:""})},n.handleChange=function(e){n.setState({msg:e.target.value})},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.keyListener)}},{key:"render",value:function(){return s.a.createElement("div",{className:"inputer"},s.a.createElement("textarea",{id:"msgText",autoFocus:!0,value:this.state.msg,onChange:this.handleChange,placeholder:"WriteSOMETEXT!!!"}),s.a.createElement("button",{id:"sendBtn",onClick:this.sendMsg},"SEND MESSAGE"))}}]),t}(a.Component),b=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={username:n.props.state.username,roomid:n.props.state.roomid,message:"",chatlog:n.props.state.chatlog,users:n.props.state.users},n.scrollToBottom=function(){v.animateScroll.scrollToBottom({containerId:"chathistory"})},n.soundMsg=function(){var e=new Audio;e.src="sound.mp3",e.autoplay=!0},n.newMessage=function(){var e;e=function(e){n.soundMsg();var t=n.state.chatlog;t.push(e),n.setState({chatlog:t},n.scrollToBottom)},h.on("new_msg",(function(t){return e(t)}))},n.gotDisconnect=function(){var e;e=function(e){n.setState({users:e})},h.on("got_disconnect",(function(t){return e(t)}))},n.newUser=function(){var e;e=function(e){var t=n.state.users;t.push(e),n.setState({users:t}),console.log(n.state.users)},h.on("new_user",(function(t){return e(t)}))},n.linkToBuffer=function(){document.getElementById("link").select(),document.execCommand("copy")},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.newMessage(),this.gotDisconnect(),this.newUser();var t=g().roomid;t&&this.setState({roomid:t},(function(){console.log(e.state.roomid)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"room"},s.a.createElement("div",{className:"content"},"Welcome to room ",this.state.roomid,", ",this.state.username,"!",s.a.createElement("br",null),s.a.createElement("div",{id:"linkholder",onClick:this.linkToBuffer},"Copy room link")," ",s.a.createElement("input",{id:"link",readOnly:!0,value:"http://"+window.location.host+"?roomid="+this.state.roomid}),s.a.createElement("br",null),s.a.createElement(m,{chatlog:this.state.chatlog}),s.a.createElement(p,{users:this.state.users})),s.a.createElement(E,{state:{username:this.state.username,roomid:this.state.roomid}}))}}]),t}(a.Component),y=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={username:""},n.handleChange=function(e){n.setState({username:e.target.value})},n.send=function(){var e;n.state.username&&(e={username:n.state.username,roomid:g().roomid},h.emit("got_name",e))},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"room"},s.a.createElement("div",{className:"nameform"},s.a.createElement("div",{className:"justtext"},"Chat"),s.a.createElement("input",{id:"nameinput",onChange:this.handleChange,placeholder:"Enter name",autoFocus:!0}),s.a.createElement("button",{id:"sendnamebtn",onClick:this.send},"Send"),s.a.createElement("br",null),s.a.createElement("div",{className:"justtext"},"Test task by Vlasenko Vasiliy")))}}]),t}(a.Component),k=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={isSet:!1,username:"",roomid:"",chatlog:[],users:[]},n.onDisconnect=function(){var e;e=function(){window.location.reload(),alert("Server disconnected!")},h.on("disconnect",(function(){return e()}))},n.setName=function(){var e;e=function(e){n.setState({isSet:!0,username:e.username,roomid:e.roomid,chatlog:e.chatlog,users:e.users})},h.on("got_name",(function(t){return e(t)}))},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setName(),this.onDisconnect()}},{key:"render",value:function(){return this.state.isSet?s.a.createElement(b,{state:this.state}):s.a.createElement(y,null)}}]),t}(a.Component);Object(o.render)(s.a.createElement(k,null),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.cb517b1b.chunk.js.map